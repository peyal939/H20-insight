<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ location_data.location_name }} Data Comparison</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#e0f7fa',
                            100: '#b2ebf2',
                            200: '#80deea',
                            300: '#4dd0e1',
                            400: '#26c6da',
                            500: '#00bcd4',
                            600: '#00acc1',
                            700: '#0097a7',
                            800: '#00838f',
                            900: '#006064'
                        }
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="font-sans bg-gray-50">
    <!-- Header -->
    <header class="bg-primary-500 text-white py-4 px-8">
        <div class="flex justify-between items-center">
            <a href="/" class="text-white no-underline">
                <h1 class="text-3xl font-semibold">H2OInsight</h1>
            </a>
            <div>
                <a href="javascript:history.back()" class="bg-white text-primary-500 hover:bg-gray-100 px-4 py-2 rounded text-sm font-medium mr-2">
                    Back
                </a>
                <a href="/logout" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm font-medium">
                    Logout
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">Comparison between <span class="text-primary-600">{{ date_dic.left }}</span> and <span class="text-primary-600">{{ date_dic.right }}</span> of <span class="text-primary-600">{{ location_data.location_name }}</span></h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- pH Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">pH</h2>
                    <canvas id="phChart" width="400" height="200"></canvas>
                </div>

                <!-- BOD Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">BOD (mg/ml)</h2>
                    <canvas id="bodChart" width="400" height="200"></canvas>
                </div>
                
                <!-- COD Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">COD (mg/ml)</h2>
                    <canvas id="codChart" width="400" height="200"></canvas>
                </div>

                <!-- Temperature Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Temperature (ᵒC)</h2>
                    <canvas id="temperatureChart" width="400" height="200"></canvas>
                </div>

                <!-- Ammonia Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Ammonia (mg/ml)</h2>
                    <canvas id="ammoniaChart" width="400" height="200"></canvas>
                </div>
                
                <!-- Arsenic Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Arsenic (mg/ml)</h2>
                    <canvas id="arsenicChart" width="400" height="200"></canvas>
                </div>

                <!-- Calcium Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Calcium (mg/ml)</h2>
                    <canvas id="calciumChart" width="400" height="200"></canvas>
                </div>
                
                <!-- EC Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">EC (µS/cm)</h2>
                    <canvas id="ecChart" width="400" height="200"></canvas>
                </div>

                <!-- Coliform Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Coliform (Faecal) (N/100ml)</h2>
                    <canvas id="coliformChart" width="400" height="200"></canvas>
                </div>
                
                <!-- Hardness Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Hardness (mg/ml)</h2>
                    <canvas id="hardnessChart" width="400" height="200"></canvas>
                </div>

                <!-- Lead Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Lead (mg/ml)</h2>
                    <canvas id="lead_pbChart" width="400" height="200"></canvas>
                </div>
                
                <!-- Nitrogen Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Nitrogen (mg/ml)</h2>
                    <canvas id="nitrogenChart" width="400" height="200"></canvas>
                </div>

                <!-- Sodium Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Sodium (mg/ml)</h2>
                    <canvas id="sodiumChart" width="400" height="200"></canvas>
                </div>
                
                <!-- Sulfate Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Sulfate (mg/ml)</h2>
                    <canvas id="sulfateChart" width="400" height="200"></canvas>
                </div>

                <!-- TSS Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">TSS (mg/ml)</h2>
                    <canvas id="tssChart" width="400" height="200"></canvas>
                </div>
                
                <!-- Turbidity Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">Turbidity (NTU)</h2>
                    <canvas id="turbidityChart" width="400" height="200"></canvas>
                </div>

                <!-- TDS Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold text-center text-gray-700 mb-4">TDS (mg/ml)</h2>
                    <canvas id="tdsChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </main>

    <script>
        var location1Data = {{ location_1_data | tojson | safe }};
        var location2Data = {{ location_2_data | tojson | safe }};
        var date_dic = {{ date_dic | tojson | safe }};

        function createBarChart(canvasId, label, data1, data2) {
            var ctx = document.getElementById(canvasId).getContext('2d');
            return new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [date_dic.left, date_dic.right],
                    datasets: [{
                        label: label,
                        backgroundColor: ['rgba(0, 188, 212, 0.7)', 'rgba(103, 58, 183, 0.7)'],
                        data: [data1, data2]
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Generate charts for each comparison
        createBarChart('phChart', 'pH', location1Data.ph, location2Data.ph);
        createBarChart('bodChart', 'BOD', location1Data.bod, location2Data.bod);
        createBarChart('codChart', 'COD', location1Data.cod, location2Data.cod);
        createBarChart('temperatureChart', 'Temperature', location1Data.temperature, location2Data.temperature);
        createBarChart('ammoniaChart', 'Ammonia', location1Data.ammonia, location2Data.ammonia);
        createBarChart('arsenicChart', 'Arsenic', location1Data.arsenic, location2Data.arsenic);
        createBarChart('calciumChart', 'Calcium', location1Data.calcium, location2Data.calcium);
        createBarChart('ecChart', 'EC', location1Data.ec, location2Data.ec);
        createBarChart('coliformChart', 'Coliform', location1Data.coliform, location2Data.coliform);
        createBarChart('hardnessChart', 'Hardness', location1Data.hardness, location2Data.hardness);
        createBarChart('lead_pbChart', 'Lead', location1Data.lead_pb, location2Data.lead_pb);
        createBarChart('nitrogenChart', 'Nitrogen', location1Data.nitrogen, location2Data.nitrogen);
        createBarChart('sodiumChart', 'Sodium', location1Data.sodium, location2Data.sodium);
        createBarChart('sulfateChart', 'Sulfate', location1Data.sulfate, location2Data.sulfate);
        createBarChart('tssChart', 'TSS', location1Data.tss, location2Data.tss);
        createBarChart('turbidityChart', 'Turbidity', location1Data.turbidity, location2Data.turbidity);
        createBarChart('tdsChart', 'TDS', location1Data.tds, location2Data.tds);
    </script>
</body>
</html>
